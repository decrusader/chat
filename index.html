<!DOCTYPE html>
<html lang="nl">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    header {
        background-color: #666;
        padding: 30px;
        text-align: center;
        font-size: 35px;
        color: white;
    }
</style>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <header>
        <form action="" id="form">
            <label for="name">Your name:</label><br>
            <input type="text" id="name" name="name"><br>

            <label for="message">Your message:</label><br>
            <input type="text" id="message" name="message"><span><input type="submit" id="Submit"></span><br>
        </form>
    </header>
</body>

<script>
    const myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");

    function onsubmit(event) {
        event.preventDefault()
        const name = document.querySelector("#name").value
        const message = document.querySelector("#message").value

        console.log(name);
        console.log(message);
        fetch("http://10.30.160.226:8001/message", {

            method: "POST",
            body: JSON.stringify({
                "author": name,
                "message": message,
            }),
            headers: myHeaders
        }
        );
    }

    document.querySelector("#form").addEventListener("submit", onsubmit)

    fetch("http://10.30.160.226:8001/messages")
        .then((Response)=> response.json())
        .then((result) => consol.log(result))
        .catch((error) => console.error(error));
    
</script>

</html>